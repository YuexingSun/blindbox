{"version":3,"sources":["webpack:///static/js/49.915e58c4fb0be2ec9331.js","webpack:///./src/views/auth/index.vue?7ae6","webpack:///./src/views/auth/index.vue?c147","webpack:///./src/views/auth/index.vue?0d81","webpack:///./src/views/auth/index.vue","webpack:///./src/views/auth/index.vue?1e08"],"names":["webpackJsonp","X1Fl","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourceRoot","y76P","content","locals","ziI6","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","stringify","stringify_default","n","utils","user","js_cookie","js_cookie_default","views_auth","data","res","created","console","log","getQuery","window","localStorage","getItem","Cookies","get","postData","code","this","getToken","$router","replace","path","location","href","methods","_this","getWeixinToken","then","errorcode","JsonObj","token","time","expirestime","setItem","islogin","set","process","alert","catch","err","render","_vm","_h","$createElement","_self","_c","staticRenderFns","esExports","selectortype_template_index_0_src_views_auth","normalizeComponent","__vue_styles__","Component"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAASC,GCHjCD,EAAAD,EAAAC,QAA2BC,EAAQ,SAAkD,GAKrFD,EAAAE,MAAcH,EAAAI,EAAS,OAAWC,QAAA,EAAAC,WAAAC,SAAAC,SAAA,GAAAC,KAAA,YAAAC,WAAA,ODY5BC,KACA,SAAUX,EAAQC,EAASC,GEfjC,GAAAU,GAAcV,EAAQ,OACtB,iBAAAU,SAA4CZ,EAAAI,EAASQ,EAAA,MACrDA,EAAAC,SAAAb,EAAAC,QAAAW,EAAAC,OAEaX,GAAQ,QAAgE,WAAAU,GAAA,OFwB/EE,KACA,SAAUd,EAAQe,EAAqBb,GAE7C,YGlCA,SAAAc,GAAAC,GACEf,EAAQ,QHkCVgB,OAAOC,eAAeJ,EAAqB,cAAgBK,OAAO,GAGlE,IAAIC,GAAYnB,EAAoB,QAChCoB,EAAiCpB,EAAoBqB,EAAEF,GAGvDG,EAAQtB,EAAoB,QAG5BuB,EAAOvB,EAAoB,QAG3BwB,EAAYxB,EAAoB,QAChCyB,EAAiCzB,EAAoBqB,EAAEG,GItC5CE,GACbC,KADa,WAEX,OACEC,IAAK,KAGTC,QANa,WASXC,QAAQC,IAAI,OAEZ,IAAKC,YAAS,SAAYC,OAAOC,aAAaC,QAAQ,SAO/C,GAAIH,YAAS,UAAYI,IAAQC,IAAI,YAAa,CAEvDP,QAAQC,IAAR,OAAmBC,YAAS,QAC5B,IAAMM,IACJC,KAAMP,YAAS,QAEjBQ,MAAKC,SAASH,OACLL,QAAOC,aAAaC,QAAQ,WACrCL,QAAQC,IAAI,SACZS,KAAKE,QAAQC,SAASC,KAAM,eAhBkC,CAM9DX,OAAOY,SAASC,KADN,kNAcdC,SACEN,SADO,SACGH,GAAU,GAAAU,GAAAR,IAClBS,aAAeX,GACZY,KAAK,SAAAtB,GACJ,GAA2B,IAAvBA,EAAID,KAAKwB,UAAiB,CAC5B,GAAMC,IACJC,MAAOzB,EAAID,KAAKA,KAAK0B,MACrBC,KAAM1B,EAAID,KAAKA,KAAK4B,YAEtBtB,QAAOC,aAAasB,QAAQ,QAASpC,IAAegC,IACpDJ,EAAKpB,IAAMR,IAAeQ,EAAID,KAAKA,MAEL,IAA1BC,EAAID,KAAKA,KAAK8B,SAEhBrB,IAAQsB,IAAI,YAAY,GAExBzB,OAAOY,SAASC,KAAOa,sDAEvB7B,QAAQC,IAAI,QAEZE,OAAOY,SAASC,KAAOa,yDAIzB7B,SAAQC,IAAIH,GACZgC,MAAM,QAGTC,MAAM,SAAAC,GACLF,MAAM,UACN9B,QAAQC,IAAI+B,QCvEtBC,EAAA,WAA0B,GAAAC,GAAAxB,KAAayB,EAAAD,EAAAE,cAAkD,QAAxBF,EAAAG,MAAAC,IAAAH,GAAwB,QACzFI,KACAC,GAAiBP,SAAAM,mBACFE,EAAA,EFAfC,EAAyBxE,EAAQ,QASjCyE,EAAA3D,EAKA4D,EAAAF,EACE9C,EACA6C,GATF,EAWAE,EAPA,kBAEA,KAUe5D,GAAA,QAAA6D,EAAiB","file":"static/js/49.915e58c4fb0be2ec9331.js","sourcesContent":["webpackJsonp([49],{\n\n/***/ \"X1Fl\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"y76P\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"X1Fl\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"ea2dbfa8\", content, true, {});\n\n/***/ }),\n\n/***/ \"ziI6\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"mvHQ\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// EXTERNAL MODULE: ./src/utils/index.js\nvar utils = __webpack_require__(\"0xDb\");\n\n// EXTERNAL MODULE: ./src/api/user.js\nvar user = __webpack_require__(\"vMJZ\");\n\n// EXTERNAL MODULE: ./node_modules/js-cookie/src/js.cookie.js\nvar js_cookie = __webpack_require__(\"lbHh\");\nvar js_cookie_default = /*#__PURE__*/__webpack_require__.n(js_cookie);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vux-loader/src/script-loader.js!./node_modules/vux-loader/src/script-loader.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/views/auth/index.vue\n\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ var auth = ({\n  data: function data() {\n    return {\n      res: ''\n    };\n  },\n  created: function created() {\n    // 微信认证和 检测会员是否登录\n    // const wxAuthCode = getQuery('code')\n    console.log('认证开始');\n    var appID = \"wx7409d280f61a56a8\";\n    if (!Object(utils[\"a\" /* getQuery */])('code') && !window.localStorage.getItem('token')) {\n      // 尚未授权\n      var scope = 'snsapi_userinfo'; // \"snsapi_base\";// ;\n      // var redirectUri = location.href.split('#')[0]\n      var redirectUri = \"https://m.hecate.edifier.com\" + '/weixin/index.html';\n      var url = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + appID + '&redirect_uri=' + redirectUri + '&response_type=code&scope=' + scope + '&state=STATE#wechat_redirect';\n      window.location.href = url;\n    } else if (Object(utils[\"a\" /* getQuery */])('code') && !js_cookie_default.a.get('authCode')) {\n      // 首次授权 回调地址 第二次进入该页面 完成授权操作 提交code给后端接口\n      console.log('\\u9996\\u6B21\\u6388\\u6743' + Object(utils[\"a\" /* getQuery */])('code'));\n      var postData = {\n        code: Object(utils[\"a\" /* getQuery */])('code')\n      };\n      this.getToken(postData);\n    } else if (window.localStorage.getItem('token')) {\n      console.log('other');\n      this.$router.replace({ path: '/home' });\n    }\n  },\n\n  methods: {\n    getToken: function getToken(postData) {\n      var _this = this;\n\n      Object(user[\"E\" /* getWeixinToken */])(postData).then(function (res) {\n        if (res.data.errorcode === 0) {\n          var JsonObj = {\n            token: res.data.data.token,\n            time: res.data.data.expirestime\n          };\n          window.localStorage.setItem('token', stringify_default()(JsonObj));\n          _this.res = stringify_default()(res.data.data);\n          // 判断用户是否登录\n          if (res.data.data.islogin === 0) {\n            // 未登录/注册\n            js_cookie_default.a.set('authCode', true);\n            // window.location.href = window.location.href.split('?')[0] + '#/home'\n            window.location.href = \"https://m.hecate.edifier.com\" + '/wap/index.html#/home';\n          } else {\n            console.log('进入首页');\n            // window.location.href = window.location.href.split('?')[0] + '#/home'\n            window.location.href = \"https://m.hecate.edifier.com\" + '/wap/index.html#/home';\n          }\n          // 处理数据\n        } else {\n          console.log(res);\n          alert('失败');\n        }\n      }).catch(function (err) {\n        alert('请求接口失败');\n        console.log(err);\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vux-loader/src/script-loader.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/views/auth/index.vue\n\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ var views_auth = ({\n  data: function data() {\n    return {\n      res: ''\n    };\n  },\n  created: function created() {\n    // 微信认证和 检测会员是否登录\n    // const wxAuthCode = getQuery('code')\n    console.log('认证开始');\n    var appID = \"wx7409d280f61a56a8\";\n    if (!Object(utils[\"a\" /* getQuery */])('code') && !window.localStorage.getItem('token')) {\n      // 尚未授权\n      var scope = 'snsapi_userinfo'; // \"snsapi_base\";// ;\n      // var redirectUri = location.href.split('#')[0]\n      var redirectUri = \"https://m.hecate.edifier.com\" + '/weixin/index.html';\n      var url = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + appID + '&redirect_uri=' + redirectUri + '&response_type=code&scope=' + scope + '&state=STATE#wechat_redirect';\n      window.location.href = url;\n    } else if (Object(utils[\"a\" /* getQuery */])('code') && !js_cookie_default.a.get('authCode')) {\n      // 首次授权 回调地址 第二次进入该页面 完成授权操作 提交code给后端接口\n      console.log('\\u9996\\u6B21\\u6388\\u6743' + Object(utils[\"a\" /* getQuery */])('code'));\n      var postData = {\n        code: Object(utils[\"a\" /* getQuery */])('code')\n      };\n      this.getToken(postData);\n    } else if (window.localStorage.getItem('token')) {\n      console.log('other');\n      this.$router.replace({ path: '/home' });\n    }\n  },\n\n  methods: {\n    getToken: function getToken(postData) {\n      var _this = this;\n\n      Object(user[\"E\" /* getWeixinToken */])(postData).then(function (res) {\n        if (res.data.errorcode === 0) {\n          var JsonObj = {\n            token: res.data.data.token,\n            time: res.data.data.expirestime\n          };\n          window.localStorage.setItem('token', stringify_default()(JsonObj));\n          _this.res = stringify_default()(res.data.data);\n          // 判断用户是否登录\n          if (res.data.data.islogin === 0) {\n            // 未登录/注册\n            js_cookie_default.a.set('authCode', true);\n            // window.location.href = window.location.href.split('?')[0] + '#/home'\n            window.location.href = \"https://m.hecate.edifier.com\" + '/wap/index.html#/home';\n          } else {\n            console.log('进入首页');\n            // window.location.href = window.location.href.split('?')[0] + '#/home'\n            window.location.href = \"https://m.hecate.edifier.com\" + '/wap/index.html#/home';\n          }\n          // 处理数据\n        } else {\n          console.log(res);\n          alert('失败');\n        }\n      }).catch(function (err) {\n        alert('请求接口失败');\n        console.log(err);\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-65cd3599\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/index.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_views_auth = (esExports);\n// CONCATENATED MODULE: ./src/views/auth/index.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"y76P\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-65cd3599\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  views_auth,\n  selectortype_template_index_0_src_views_auth,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_views_auth = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/49.915e58c4fb0be2ec9331.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-65cd3599\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/auth/index.vue\n// module id = X1Fl\n// module chunks = 49","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65cd3599\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"ea2dbfa8\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-65cd3599\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/auth/index.vue\n// module id = y76P\n// module chunks = 49","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65cd3599\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-65cd3599\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-65cd3599\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/index.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n\nimport { getQuery } from '@/utils/index'\nimport { getWeixinToken } from '@/api/user'\n\nimport Cookies from 'js-cookie'\nexport default {\n  data () {\n    return {\n      res: ''\n    }\n  },\n  created () {\n    // 微信认证和 检测会员是否登录\n    // const wxAuthCode = getQuery('code')\n    console.log('认证开始')\n    const appID = process.env.wxappID\n    if (!getQuery('code') && !window.localStorage.getItem('token')) {\n      // 尚未授权\n      var scope = 'snsapi_userinfo' // \"snsapi_base\";// ;\n      // var redirectUri = location.href.split('#')[0]\n      var redirectUri = process.env.BASE_SELF + '/weixin/index.html'\n      var url = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + appID + '&redirect_uri=' + redirectUri + '&response_type=code&scope=' + scope + '&state=STATE#wechat_redirect'\n      window.location.href = url\n    } else if (getQuery('code') && !Cookies.get('authCode')) {\n      // 首次授权 回调地址 第二次进入该页面 完成授权操作 提交code给后端接口\n      console.log(`首次授权${getQuery('code')}`)\n      const postData = {\n        code: getQuery('code')\n      }\n      this.getToken(postData)\n    } else if (window.localStorage.getItem('token')) {\n      console.log('other')\n      this.$router.replace({path: '/home'})\n    }\n  },\n  methods: {\n    getToken (postData) {\n      getWeixinToken(postData)\n        .then(res => {\n          if (res.data.errorcode === 0) {\n            const JsonObj = {\n              token: res.data.data.token,\n              time: res.data.data.expirestime\n            }\n            window.localStorage.setItem('token', JSON.stringify(JsonObj))\n            this.res = JSON.stringify(res.data.data)\n            // 判断用户是否登录\n            if (res.data.data.islogin === 0) {\n                // 未登录/注册\n              Cookies.set('authCode', true)\n              // window.location.href = window.location.href.split('?')[0] + '#/home'\n              window.location.href = process.env.BASE_SELF + '/wap/index.html#/home'\n            } else {\n              console.log('进入首页')\n              // window.location.href = window.location.href.split('?')[0] + '#/home'\n              window.location.href = process.env.BASE_SELF + '/wap/index.html#/home'\n            }\n            // 处理数据\n          } else {\n            console.log(res)\n            alert('失败')\n          }\n        })\n        .catch(err => {\n          alert('请求接口失败')\n          console.log(err)\n        })\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/auth/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-65cd3599\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}